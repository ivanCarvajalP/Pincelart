rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // TODOS LOS ACCESOS BLOQUEADOS
    // Solo usuarios autenticados pueden leer
    // Solo admins pueden escribir
    
    // Colección de usuarios
    match /usuarios/{userId} {
      // Solo el propio usuario puede leer sus datos
      allow read: if request.auth != null && request.auth.uid == userId;
      // Solo admins pueden escribir (configurar según tu sistema de roles)
      allow write: if false; // Cambiar a tu lógica de roles
    }
    
    // Colección de productos - LECTURA PÚBLICA, escritura solo admins
    match /productos/{productId} {
      allow read: if true; // Cualquiera puede VER los productos
      allow write: if false; // Solo admins pueden modificar
    }
    
    
    // Colección de ventas - BLOQUEADA completamente
    match /ventas/{ventaId} {
      allow read, write: if false;
    }
    
    // Si tienes una colección de admins
    match /admins/{adminId} {
      allow read: if request.auth != null;
      allow write: if false;
    }
    
    // Bloquear todo lo demás
    match /{document=**} {
      allow read, write: if false;
    }
  }
}

